<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Educator Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">

  <h1 class="mb-4">Educator Dashboard</h1>

  <ul class="nav nav-tabs" id="eduTab" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="create-tab" data-bs-toggle="tab" data-bs-target="#create" type="button" role="tab">Buat Soal</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="manage-tab" data-bs-toggle="tab" data-bs-target="#manage" type="button" role="tab">Kelola Soal</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="score-tab" data-bs-toggle="tab" data-bs-target="#score" type="button" role="tab">Score Murid</button>
    </li>
  </ul>

  <div class="tab-content mt-3" id="eduTabContent">
    
    <div class="tab-pane fade show active" id="create" role="tabpanel">
      <h3>Buat Soal Baru</h3>
      <form action="/educator/questions/create" method="POST" class="mt-3">
        <div class="mb-3">
          <label for="questionText" class="form-label">Pertanyaan</label>
          <textarea class="form-control" id="questionText" name="text" required></textarea>
        </div>
        <div class="mb-3">
          <label for="answer" class="form-label">Jawaban Benar</label>
          <input type="text" class="form-control" id="answer" name="answer" required>
        </div>
        <div class="mb-3">
          <label for="choices" class="form-label">Pilihan (pisahkan dengan koma)</label>
          <input type="text" class="form-control" id="choices" name="choices" placeholder="A,B,C,D">
        </div>
        <button type="submit" class="btn btn-success">Simpan Soal</button>
      </form>
    </div>

    <div class="tab-pane fade" id="manage" role="tabpanel">
      <h3>Daftar Soal</h3>
      <table class="table table-bordered mt-3">
        <thead>
          <tr>
            <th>No</th>
            <th>Pertanyaan</th>
            <th>Jawaban Benar</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody>
          <% if (questions && questions.length > 0) { %>
            <% questions.forEach((q, i) => { %>
              <tr>
                <td><%= i+1 %></td>
                <td><%= q.text %></td>
                <td><%= q.answer %></td>
                <td>
                  <a href="/educator/questions/<%= q.id %>/edit" class="btn btn-warning btn-sm">Edit</a>
                  <form action="/educator/questions/<%= q.id %>?_method=DELETE" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-danger btn-sm">Hapus</button>
                  </form>
                </td>
              </tr>
            <% }) %>
          <% } else { %>
            <tr>
              <td colspan="4" class="text-center">Belum ada soal</td>
            </tr>
          <% } %>
        </tbody>
      </table>
    </div>

    <div class="tab-pane fade" id="score" role="tabpanel">
      <h3>Score Murid</h3>
      <table class="table table-striped mt-3">
        <thead>
          <tr>
            <th>No</th>
            <th>Nama Murid</th>
            <th>Email</th>
            <th>Nilai</th>
          </tr>
        </thead>
        <tbody>
          <% if (scores && scores.length > 0) { %>
            <% scores.forEach((s, i) => { %>
              <tr>
                <td><%= i+1 %></td>
                <td><%= s.Student.Profile ? s.Student.Profile.fullName : s.Student.username %></td>
                <td><%= s.Student.email %></td>
                <td><%= s.value %></td>
              </tr>
            <% }) %>
          <% } else { %>
            <tr>
              <td colspan="4" class="text-center">Belum ada score</td>
            </tr>
          <% } %>
        </tbody>
      </table>
    </div>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
